<html>
    <head>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <link rel="stylesheet" href="style.css">
        <style>
           
            .details{
                font-size: 20px; color: pink; font-family:'Courier New', Courier, monospace;
            } 
            
            h4 span {
                color: rgb(255, 122, 122);
                font-weight:bolder;
                font-family: Georgia, 'Times New Roman', Times, serif;
                }

    table {
      
      width: 100%;
    }
    th, td {
      border: 1px solid #dddddd;
      text-align: center;
      padding: 8px;
    }
    th {
      background-color: #f2f2f2;
    }
    .month {
      background-color: black;
      color: white;
    }
    .day {
      background-color: palevioletred;
      color: white;
    }
    .event {
      background-color: palevioletred;
      color: white;
    }
        </style>
        <body>
            <div >
                <div class="Navigation">
                <a href="index.html"><img src="logo.png" alt="Logo" class="logo" ></a>
                <ul class="nav-links">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="aboutus.html">About Us</a></li>
                    <li><a href="contactus.html">Contact Us</a></li>
                    <li><a href="adoption.html">Pets Adoption</a></li>
                    <li><a href="petsstore.html">Pets Store</a></li>
                    <li><a href="veterinaryclinic.html">Veterinary Clinic</a></li>
                    <li><a href="petsRescue.html">Pets Rescue</a></li>
                    <li><a href="Questionnaire.html">Questionnaire page</a></li>
            <li><a href="calculation.html">Bill Calculator</a></li>
            <li><a href="game.html">Fun Page </a></li>
                </ul>
            </div>
            <div class="container">
            <h1><img src="Clinic.png" alt="Clinic header"></h1>
            <p class="container" style="font-weight:bolder; padding-left: 380px; font-size: 30px; color: #999999; font-family: Georgia, 'Times New Roman', Times, serif;">Book an appointment for your pet!</p>
            <br/><br/>
            <h4 style="font-weight:bolder; color: #999999; font-family: Georgia, 'Times New Roman', Times, serif;">Fill <span>ALL</span> the following please:</h4>
            <br/>
            <div class="row">
                <div class="col"><form id="appointmentForm">
                  <p class="details">Name:
                      <input type="text" name="name" placeholder="Enter your name" value="">
                  </p>
                  <p class="details">Phone number:
                      <input type="text" name="phoneNumber" placeholder="Enter your phone number" value="">
                  </p>
                  <p class="details">Age:
                      <input type="text" name="age" placeholder="Enter your age" value="">
                  </p>
                  <p class="details">Password:
                      <input type="password" name="password" placeholder="Enter your password" value="">
                  </p>
                  <p class="details">Pet's name:
                      <input type="text" name="petName" placeholder="Enter your pet's name" value="">
                  </p>
                  <p class="details">Pet's age:
                      <input type="text" name="petAge" placeholder="Enter your pet's age" value="">
                  </p>
                  <p class="details">Appointment Date:
                      <input type="date" name="appointmentDate">
                  </p>
                  <p class="details">Extra details: 
                      <textarea name="extraDetails" rows="4" cols="50">provide more information about your pet's situation please...</textarea>
                  </p>
                  <input type="reset" value="Reset" class="details">
                  <input type="submit" value="Submit" class="details">
              </form></div> 
                <div class="col">
                  <br><br><br>
                  <label style="font-weight:bolder; font-size: 20px; color: #999999; font-family: Georgia, 'Times New Roman', Times, serif;">Search for appoinments details using pet's name: <input type="text" id="searchInput" placeholder="Search appointments"></label>
                  <br><br>
                  <table id="appointmentCalendar">
                     
                  </table>
              </div>
            </div>
          </div>
            <hr class="container">
            <div class="container">
                <a href="index.html"><img src="logo.png" alt="logo"></a><br /><br />
                <a href="aboutus.html">About Us</a><br /><br />
                <a href="contactus.html">Contact Us</a>
                <br/><br/>
            </div>
             </div>
             
             <script>
              function Appointment(name, phoneNumber, age, password, petName, petAge, appointmentDate, extraDetails) {
                  this.name = name;
                  this.phoneNumber = phoneNumber;
                  this.age = age;
                  this.password = password;
                  this.petName = petName;
                  this.petAge = petAge;
                  this.appointmentDate = appointmentDate;
                  this.extraDetails = extraDetails;
              }

              function Pet(name, age) {
                this.name = name;
                this.age = age;
              }

              var pets =[
                new Pet("Max", 3),
                new Pet("Bella", 5),
                new Pet("Charlie", 2),
                new Pet("Lucy", 7)
            ];

              var appointments = [
                new Appointment("Maryam", "1234567890", 35, "password1", pets[0].name, pets[0].age, "2024-04-15", "Regular checkup"),
                new Appointment("Furat", "9876598010", 28, "password2", pets[1].name, pets[1].age, "2024-04-20", "Vaccination"),
                new Appointment("Turki", "5543443333", 40, "password3", pets[2].name, pets[2].age, "2024-04-25", "Dental cleaning"),
                new Appointment("Tariq", "1112223576", 45, "password4", pets[3].name, pets[3].age, "2024-04-30", "Grooming")
            ];

            function generateCalendar() {
            var calendar = document.getElementById("appointmentCalendar");
            var daysInMonth = 31; 

            calendar.innerHTML = "";

            var headerRow = calendar.insertRow();
            var d = new Date();
            const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
            headerRow.innerHTML = "<th colspan='7' class='month'>"+ months[d.getMonth()]+" "+d.getFullYear()+"</th>";

            var daysRow = calendar.insertRow();
            var daysOfWeek = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
            for (var i = 0; i < daysOfWeek.length; i++) {
                daysRow.innerHTML += "<th class='day'>" + daysOfWeek[i] + "</th>";
            }

            
            var currentDay = 1;
            for (var row = 0; row < 5; row++) {
                var newRow = calendar.insertRow();
                for (var col = 0; col < 7; col++) {
                    if (currentDay <= daysInMonth) {
                        var cellContent = "";
                        appointments.forEach(function(appointment) {
                            var appointmentDate = new Date(appointment.appointmentDate);
                            if (appointmentDate.getDate() === currentDay && appointmentDate.getMonth() === d.getMonth()) {
                                cellContent += "<div>" + appointment.petName + "</div>";
                            }
                        });
                        newRow.innerHTML += "<td>" + currentDay + cellContent + "</td>";
                        currentDay++;
                    } else {
                        newRow.innerHTML += "<td></td>";
                    }
                }
            }

            
            var eventRow = calendar.insertRow();
            eventRow.innerHTML = "<td colspan='7' class='event' style='background-color: white; color: black;'>Search Result will appear here!</td>";
        }

        document.getElementById("appointmentForm").addEventListener("submit", function(event) {
            
            event.preventDefault();
            var formData = new FormData(event.target);
            var appointmentData = {};
            formData.forEach(function(value, key) {
                appointmentData[key] = value;
            });

            var appointment = new Appointment(
                appointmentData["name"],
                appointmentData["phoneNumber"],
                appointmentData["age"],
                appointmentData["password"],
                appointmentData["petName"],
                appointmentData["petAge"],
                appointmentData["appointmentDate"],
                appointmentData["extraDetails"]
            );

            appointments.push(appointment);

            event.target.reset();

            generateCalendar();
        });


        function filterAppointments() {
            var searchInput = document.getElementById("searchInput").value.toLowerCase();
            var filteredAppointments = appointments.filter(function(appointment) {
                return appointment.name.toLowerCase().includes(searchInput) ||
                       appointment.petName.toLowerCase().includes(searchInput);
            });

            updateCalendar(filteredAppointments);
        }

        function updateCalendar(filteredAppointments) {
            var calendar = document.getElementById("appointmentCalendar");
            var eventRow = calendar.querySelector(".event");
            eventRow.innerHTML = ""; 
            if (filteredAppointments.length > 0) {
                
                filteredAppointments.forEach(function(appointment) {
                    eventRow.innerHTML += "<td colspan='7'>" + appointment.name + " - " + appointment.petName + " (" + appointment.appointmentDate + ")" +" - "+appointment.phoneNumber+"</td>";
                });
            } else {
                eventRow.innerHTML = "No appointments found";
            }
        }
       
        window.addEventListener("load", function() {
            generateCalendar();
        });

        document.getElementById("searchInput").addEventListener("keydown", function(event) {
            if (event.key === "Enter") {
                filterAppointments();
            }
        });
             </script>
        </body>
    </head>
</html>
